version: 2.1
jobs:
  install-bats:
    steps:
      - run:
        command: |
          cd /tmp && git clone https://github.com/bats-core/bats-core.git && cd bats-core
          ./install.sh /usr/local
        name: Install BATS (bash testing)
  run-bats:
    steps:
      - checkout
      - run:
          command: |
            bats ./test_ghd.sh
workflows:
  version: 2.1
  docker:
    - image: cimg/base:2020.01
  test:
    jobs:
      - install-bats
      - run-bats
